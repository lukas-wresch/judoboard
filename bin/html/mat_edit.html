<h2 id="headline">Edit Mat</h2>

<form>

<div>
  <label id="label_id" style="width:250px;float:left;margin-top:5px;">No.</label>
  <select style="padding-top:5px;margin-bottom:20px;width: 1.5cm;" id="id">
  </select>
</div>

<div>
  <label style="width:250px;float:left; margin-top:4px;" id="label_name">Name</label>
  <input style="margin-bottom:20px;" type="text" id="name" value="" size="30" maxlength="64"/>
</div>

<div>
  <label style="width:250px;float:left;margin-top:4px;" id="label_ipponStyle">Ippon/Waza-Ari Style</label>
  <select style="margin-bottom:20px;" id="ipponStyle">
    <option selected value="0" id="two_digits">Two Digits</option>
    <option value="1" id="single_digit">One Digit</option>
    <option value="2" id="spelled_out">Spelled Out</option>
  </select>
</div>

<div>
  <label style="width:250px;float:left;margin-top:4px;" id="label_timerStyle">Timer Style</label>
  <select style="margin-bottom:20px;" id="timerStyle">
    <option selected value="0" id="with_hundred">With Hundreds (1:23:4)</option>
    <option value="1" id="only_seconds">Only seconds (1:23)</option>
    <option value="2" id="full">Completely (1:23.456)</option>
  </select>
</div>

<div>
  <label style="width:250px;float:left;margin-top:4px;" id="label_sound">Sounds</label>
  <input type="checkbox" id="sound" class="switch-input">
  <label style="padding-top:0px;padding-bottom:0px;margin-top:5px;margin-bottom:20px;" class="switch-label" for="sound">
    <span class="toggle-on" id="sound_enabled">Enabled</span><span class="toggle-off" for="sound" id="sound_disabled">Disabled</span>
  </label>
</div>

<div>
  <label style="width:250px;float:left;margin-top:4px;" id="label_sound_filename">Sound Type</label>
  <select style="margin-bottom:20px;" id="sound_filename">
    <option selected value="0">test</option>
  </select>
</div>

<button class="neutral" style="margin-top: 0.8cm;" onclick="return UpdateMat()" id="update">Update Mat</button>

</form>


<script>



function OpenMat()
{
  Ajax('/ajax/config/open_mat?id=' + id, function() {
    Update();
  });
  return false;
}


function CloseMat()
{
  AjaxCallback('/ajax/config/close_mat?id=' + id, function() {
    Update();
  });
  return false;
}


function UpdateMat()
{
  var params = URLEncode({
    id:              document.getElementById("id").value,
    name:            document.getElementById("name").value,
    ipponStyle:      document.getElementById("ipponStyle").value,
    timerStyle:      document.getElementById("timerStyle").value,
    sound:           document.getElementById("sound").checked,
    sound_filename:  document.getElementById("sound_filename").value,
  });

  AjaxPost('/ajax/config/set_mat?id=' + id, params, function() {
    navigate("mat_configure.html");
  });

  return false;
}



function GetMat(id)
{
  AjaxCallback("ajax/config/get_mats", function(response) {
    console.log(response);
    var res = response.split(",");

    if (res.length < 3)
      return;

    var maxID = res[0];

    for (var i=1; i < res.length;)
    {
      var matID   = res[i++];
      var type    = res[i++];
      var is_open = res[i++];
      var name    = res[i++];
      var ipponStyle = res[i++];
      var timerStyle = res[i++];

      if (matID == id)
      {
        document.getElementById("name").value = name;
        document.getElementById("ipponStyle").value = ipponStyle;
        document.getElementById("timerStyle").value = timerStyle;
      }
    }

    for (var i=1; i <= maxID; i++)
    {
      var option = document.createElement("option");
      option.text  = i;
      option.value = i;
      document.getElementById("id").add(option);
    }

    document.getElementById("id").value = id;
  });
}



var id = URLDecode(URL, "id");
GetMat(id);

document.getElementById("sound_enabled").innerHTML  = lang.enabled;
document.getElementById("sound_disabled").innerHTML = lang.disabled;

</script>